(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{xljH:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return s})),n.d(t,"default",(function(){return u}));n("5hJT"),n("W1QL"),n("K/PF"),n("t91x"),n("75LO"),n("PJhk"),n("mXGw");var r=n("/FXl"),a=n("TjRS");n("aD51");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={};void 0!==s&&s&&s===Object(s)&&Object.isExtensible(s)&&!s.hasOwnProperty("__filemeta")&&Object.defineProperty(s,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/attacks_explained/buffer.mdx"}});var f={_frontmatter:s},i=a.a;function u(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["components"]);return Object(r.b)(i,o({},f,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"buffer-overflow-attack"},"Buffer Overflow Attack"),Object(r.b)("h2",{id:"the-attack"},"The Attack"),Object(r.b)("p",null,"This attack is very common in a lot of frameworks and coding languages and requires a very low-level understanding."),Object(r.b)("iframe",{width:"100%",height:"450",src:"https://www.youtube.com/embed/1S0aBV-Waeo"}),Object(r.b)("p",null,"In Nodejs there was a bug in the ",Object(r.b)("inlineCode",{parentName:"p"},"Buffer")," core library that was ",Object(r.b)("a",o({parentName:"p"},{href:"https://github.com/nodejs/node/issues/4660#issue-126343377"}),"reported in 2016")," by ",Object(r.b)("a",o({parentName:"p"},{href:"https://twitter.com/feross"}),"Feross Aboukhadijeh (feross)")," and was fixed in Nodejs already."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"If an attacker can make your program call the Buffer constructor with a Number argument, then they can make it allocate uninitialized memory from the node.js process. ",Object(r.b)("strong",{parentName:"p"},"This could potentially disclose TLS private keys, user data, or database passwords."),"\nby ",Object(r.b)("a",o({parentName:"p"},{href:"https://github.com/feross"}),"Feross Aboukhadijeh")," in ",Object(r.b)("a",o({parentName:"p"},{href:"https://github.com/nodejs/node/issues/4660#issue-126343377"}),"Nodejs Github"))),Object(r.b)("p",null,"For compatibility reasons, the old API is still available. The Nodejs team added a warning message in case you use it or if it was introduced by any of your dependencies."),Object(r.b)("pre",null,Object(r.b)("code",o({parentName:"pre"},{}),"(node:7147) [DEP0005] DeprecationWarning: \n    The Buffer() and new Buffer() constructors are not recommended \n    for use due to security and usability concerns. Please use \n    the new Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() \n    construction methods instead.\n    \n    at showFlaggedDeprecation (buffer.js:127:13)\n    at new Buffer (buffer.js:148:3)\n    at Object.<anonymous> (/path/to/example.js:2:13)\n    [... more stack trace lines ...]\n")),Object(r.b)("h2",{id:"the-solution"},"The solution"),Object(r.b)("p",null,"Avoid the old Buffer API:"),Object(r.b)("pre",null,Object(r.b)("code",o({parentName:"pre"},{className:"language-js"}),"// [DEPRECATED] new Buffer(number) \nBuffer.alloc(number).\n \n// [DEPRECATED]  new Buffer(string) \nBuffer.from(string) \n \n// [DEPRECATED]  new Buffer(string, encoding))\nBuffer.from(string, encoding)\n \n// [DEPRECATED] new Buffer(...arguments) \nBuffer.from(...arguments)\n")),Object(r.b)("p",null,"In case you need to keep the legacy Buffer code running, please use ",Object(r.b)("a",o({parentName:"p"},{href:"https://www.npmjs.com/package/safe-buffer"}),"safe-buffer")," as a fast mitigation option."),Object(r.b)("h3",{id:"refs"},"Refs"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",o({parentName:"li"},{href:"https://nodejs.org/fr/docs/guides/buffer-constructor-deprecation/"}),"Nodejs | Porting to the Buffer.from()/Buffer.alloc() API")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",o({parentName:"li"},{href:"https://github.com/nodejs/node/issues/4660"}),"Github | Buffer(number) is unsafe #4660")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",o({parentName:"li"},{href:"https://snyk.io/blog/exploiting-buffer/"}),"Snyk | Exploiting Buffer")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",o({parentName:"li"},{href:"https://github.com/ChALkeR/safer-buffer/blob/master/Porting-Buffer.md#faq"}),"Porting to the Buffer.from/Buffer.alloc API"))))}void 0!==u&&u&&u===Object(u)&&Object.isExtensible(u)&&!u.hasOwnProperty("__filemeta")&&Object.defineProperty(u,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/attacks_explained/buffer.mdx"}}),u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-attacks-explained-buffer-mdx-9b047b0b70a729182898.js.map